<% provide :head_tags do %>
<meta name='turbolinks-visit-control' content='reload'>
<script>
	document.addEventListener("DOMContentLoaded", initMap2);
</script>
<% end %>

<% if user_signed_in? %>
<%= render template: "components/navbarLoggedIn"%>
<% else %>
<%= render template: "components/navbarNewUser"%>
<% end %>

<h1>Create a new task.</h1>

<%= form_with scope: :task, url: tasks_path, local: true do |form| %>

  <p>
    <%= form.label :task_name %><br>
    <%= form.text_field :task_name, placeholder:"At least 5 characters", autofocus: true %>
  </p>
 
  <p class="error">
    <%= show_errors(@task, :task_name) %>
  </p>

  <p>
    <%= form.label "Postal Code (Address)" %><br>
    <%= form.text_field :location, placeholder:"6 digits", autofocus: true %>
  </p>
  <p class="error">
    <%= show_errors(@task, :location) %>
  </p>

  <p>
    <%= form.label :task_description %><br>
    <%= form.text_area :task_description, placeholder:"Please be detailed.", autofocus: true %>
  </p>
  <p class="error">
    <%= show_errors(@task, :task_description) %>
  </p>

  <p>
    <%= form.label :start_time %><br>
    <input type="datetime-local" id="task_start_time"
       name="task[start_time]" value="2019-02-01T15:30">
  </p>

   <p>
    <%= form.label :price %><br>
    <%= form.text_field :price , placeholder:"Minimum: $0", autofocus: true%>
  </p>
  <p class="error">
    <%= show_errors(@task, :price) %>
  </p>

  <p>
    Is the price negotiable?<br>
    <input type="radio" name="task[negotiable]" id="task_negotiable" value=true> Yes <br>
	<input type="radio" name="task[negotiable]" id="task_negotiable" value=false> No <br>
  </p>
  <p class="error">
    <%= show_errors(@task, :negotiable) %>
  </p>

  <p>
    <%= form.submit  "Save Task" %>
  </p>
<% end %>

<%= form_with scope: :task, url: tasks_path, local: true do |form| %>
  ...
<% end %>

<%= link_to 'Back', tasks_path %>